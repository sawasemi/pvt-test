<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¹ã‚¿ãƒ³ãƒ•ã‚©ãƒ¼ãƒ‰ç¡çœ å°ºåº¦ï¼ˆSSSï¼‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'Yu Gothic UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 500px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            color: #333;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .research-note {
            background: #e8f4fd;
            border: 1px solid #bee5eb;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 13px;
            color: #0c5460;
        }

        .intro {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .datetime-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .datetime-title {
            color: #856404;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .datetime-input {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }

        .datetime-input input {
            padding: 8px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
        }

        .datetime-input label {
            font-size: 13px;
            color: #856404;
            font-weight: 500;
        }

        .test-section {
            display: none;
        }

        .scale-container {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .scale-title {
            color: #667eea;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 20px;
            text-align: center;
        }

        .scale-instruction {
            font-size: 14px;
            color: #666;
            margin-bottom: 25px;
            text-align: center;
            line-height: 1.5;
        }

        .scale-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .scale-option {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            position: relative;
        }

        .scale-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .scale-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .scale-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #667eea;
            color: white;
            font-weight: bold;
            font-size: 18px;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .scale-option.selected .scale-number {
            background: white;
            color: #667eea;
        }

        .scale-text {
            flex: 1;
            font-size: 15px;
            line-height: 1.4;
        }

        .scale-option input[type="radio"] {
            position: absolute;
            opacity: 0;
        }

        .submit-section {
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results {
            display: none;
            text-align: center;
        }

        .result-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .result-score {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .result-label {
            font-size: 18px;
            margin-bottom: 15px;
        }

        .result-interpretation {
            font-size: 14px;
            opacity: 0.9;
            line-height: 1.5;
        }

        .result-details {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: left;
        }

        .result-details h3 {
            color: #667eea;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .result-details p {
            font-size: 14px;
            line-height: 1.6;
            color: #666;
            margin-bottom: 10px;
        }

        .timestamp-info {
            background: #e8f4fd;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 13px;
            color: #0c5460;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
        }

        .action-buttons .btn {
            flex: 1;
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            
            .datetime-input {
                flex-direction: column;
                align-items: stretch;
            }
            
            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é–‹å§‹ç”»é¢ -->
        <div id="startSection">
            <div class="header">
                <div class="title">ã‚¹ã‚¿ãƒ³ãƒ•ã‚©ãƒ¼ãƒ‰ç¡çœ å°ºåº¦</div>
                <div class="subtitle">Stanford Sleepiness Scale (SSS)</div>
            </div>

            <div class="research-note">
                <strong>çœ‹è­·ç ”ç©¶ç”¨æ¨™æº–å°ºåº¦</strong><br>
                æœ¬å°ºåº¦ã¯æ¨™æº–åŒ–ã•ã‚ŒãŸã‚¹ã‚¿ãƒ³ãƒ•ã‚©ãƒ¼ãƒ‰ç¡çœ å°ºåº¦ã«åŸºã¥ã„ã¦ãŠã‚Šã€çœ æ°—ã®ä¸»è¦³çš„è©•ä¾¡ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
            </div>

            <div class="intro">
                <h3 style="margin-bottom: 15px; color: #667eea;">å°ºåº¦ã«ã¤ã„ã¦</h3>
                <p style="margin-bottom: 10px; line-height: 1.6;">
                    ã“ã®å°ºåº¦ã¯ã€<strong>ç¾åœ¨ã®ã‚ãªãŸã®çœ æ°—ã®ç¨‹åº¦</strong>ã‚’8æ®µéšã§è©•ä¾¡ã™ã‚‹ã‚‚ã®ã§ã™ã€‚
                </p>
                <p style="margin-bottom: 10px; line-height: 1.6;">
                    ã‚·ãƒ•ãƒˆãƒ¯ãƒ¼ã‚¯ã€å¤œå‹¤ã€ç¡çœ ä¸è¶³ãªã©ã®å½±éŸ¿ã‚’å®¢è¦³çš„ã«æ¸¬å®šã§ãã¾ã™ã€‚
                </p>
                <p style="line-height: 1.6;">
                    <strong>ç¾åœ¨ã®çŠ¶æ…‹ã‚’æ­£ç›´ã«ãŠç­”ãˆãã ã•ã„ã€‚</strong>
                </p>
            </div>

            <div class="datetime-section">
                <div class="datetime-title">æ¸¬å®šæ—¥æ™‚ã®è¨˜éŒ²</div>
                <div class="datetime-input">
                    <label>æ—¥ä»˜:</label>
                    <input type="date" id="measureDate" required>
                </div>
                <div class="datetime-input">
                    <label>æ™‚åˆ»:</label>
                    <input type="time" id="measureTime" required>
                </div>
                <div style="font-size: 12px; color: #856404; margin-top: 8px;">
                    â€» æ¸¬å®šæ¡ä»¶ï¼ˆå‹¤å‹™å‰/å¾Œã€ä¼‘æ†©æ™‚ç­‰ï¼‰ã‚’å¾Œã§è¨˜éŒ²ã§ãã¾ã™
                </div>
            </div>

            <button class="btn btn-primary" onclick="startAssessment()" id="startBtn" disabled>
                è©•ä¾¡ã‚’é–‹å§‹
            </button>
        </div>

        <!-- è©•ä¾¡ç”»é¢ -->
        <div id="testSection" class="test-section">
            <div class="scale-container">
                <div class="scale-title">ç¾åœ¨ã®çœ æ°—ãƒ¬ãƒ™ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                <div class="scale-instruction">
                    ã‚ãªãŸã®ç¾åœ¨ã®çŠ¶æ…‹ã«æœ€ã‚‚è¿‘ã„ã‚‚ã®ã‚’1ã¤é¸ã‚“ã§ãã ã•ã„
                </div>

                <div class="scale-options">
                    <div class="scale-option" onclick="selectScale(1)">
                        <div class="scale-number">1</div>
                        <div class="scale-text">
                            <strong>æ„Ÿã˜ã¯çˆ½å¿«ã€ååˆ†è¦šé†’ã€åºƒç¯„å›²ã«æ³¨æ„ãŒå‘ã„ã¦ã„ã‚‹</strong>
                        </div>
                        <input type="radio" name="sleepiness" value="1">
                    </div>

                    <div class="scale-option" onclick="selectScale(2)">
                        <div class="scale-number">2</div>
                        <div class="scale-text">
                            <strong>æ©Ÿèƒ½çš„ã§ã€åŠ¹æœçš„ã€æ³¨æ„ã¯æ¯”è¼ƒçš„åºƒç¯„å›²ã«å‘ã„ã¦ã„ã‚‹</strong>
                        </div>
                        <input type="radio" name="sleepiness" value="2">
                    </div>

                    <div class="scale-option" onclick="selectScale(3)">
                        <div class="scale-number">3</div>
                        <div class="scale-text">
                            <strong>ãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ã¦ã„ã‚‹ã€åå¿œæ€§è‰¯å¥½ã ãŒååˆ†æ³¨æ„ãŒå‘ã„ã¦ã„ãªã„</strong>
                        </div>
                        <input type="radio" name="sleepiness" value="3">
                    </div>

                    <div class="scale-option" onclick="selectScale(4)">
                        <div class="scale-number">4</div>
                        <div class="scale-text">
                            <strong>å°‘ã—ã¼ã‚“ã‚„ã‚Šã—ã¦ã„ã‚‹ã€æ³¨æ„åŠ›ãŒæ•£æ¼«</strong>
                        </div>
                        <input type="radio" name="sleepiness" value="4">
                    </div>

                    <div class="scale-option" onclick="selectScale(5)">
                        <div class="scale-number">5</div>
                        <div class="scale-text">
                            <strong>ã¼ã‚“ã‚„ã‚Šã—ã¦ã„ã‚‹ã€æ³¨æ„åŠ›ä½ä¸‹ã€ã‚ã¾ã‚Šã±ã£ã¨ã—ãªã„</strong>
                        </div>
                        <input type="radio" name="sleepiness" value="5">
                    </div>

                    <div class="scale-option" onclick="selectScale(6)">
                        <div class="scale-number">6</div>
                        <div class="scale-text">
                            <strong>çœ ã„ã€æœ¦æœ§ã¨ã—ã¦ã„ã‚‹ã€åŠªåŠ›ã—ãªã„ã¨è¦šé†’ã‚’ç¶­æŒã§ããªã„</strong>
                        </div>
                        <input type="radio" name="sleepiness" value="6">
                    </div>

                    <div class="scale-option" onclick="selectScale(7)">
                        <div class="scale-number">7</div>
                        <div class="scale-text">
                            <strong>çœ ã„ã€å¤¢è¦‹å¿ƒåœ°ã€ã™ãã«ã§ã‚‚çœ ã‚Šãã†ã€æ€è€ƒåŠ›ä½ä¸‹</strong>
                        </div>
                        <input type="radio" name="sleepiness" value="7">
                    </div>

                    <div class="scale-option" onclick="selectScale(8)">
                        <div class="scale-number">8</div>
                        <div class="scale-text">
                            <strong>çœ ã„ã€å¤¢è¦‹å¿ƒåœ°ã€æ¬¡ã®ç¬é–“çœ ã£ã¦ã—ã¾ã„ãã†</strong>
                        </div>
                        <input type="radio" name="sleepiness" value="8">
                    </div>
                </div>
            </div>

            <div class="submit-section">
                <button class="btn btn-primary" onclick="showResults()" id="submitBtn" disabled>
                    çµæœã‚’è¡¨ç¤º
                </button>
            </div>
        </div>

        <!-- çµæœç”»é¢ -->
        <div id="resultsSection" class="results">
            <div class="result-card">
                <div class="result-score" id="finalScore">0</div>
                <div class="result-label">çœ æ°—ãƒ¬ãƒ™ãƒ«</div>
                <div class="result-interpretation" id="interpretation"></div>
            </div>

            <div class="timestamp-info">
                <strong>æ¸¬å®šæƒ…å ±</strong><br>
                <span id="measurementInfo"></span>
            </div>

            <div class="result-details">
                <h3>çµæœã®è§£é‡ˆ</h3>
                <div id="detailedInterpretation"></div>
                <p><strong>æ´»ç”¨æ–¹æ³•:</strong></p>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    <li>å‹¤å‹™å‰å¾Œã®çœ æ°—å¤‰åŒ–ã®è¨˜éŒ²</li>
                    <li>å¤œå‹¤æ™‚ã®å®‰å…¨æ€§è©•ä¾¡</li>
                    <li>ç¡çœ ä¸è¶³ã®å½±éŸ¿æ¸¬å®š</li>
                    <li>ä¼‘æ†©ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®åˆ¤æ–­</li>
                </ul>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" onclick="shareResults()">çµæœã‚’å…±æœ‰</button>
                <button class="btn btn-secondary" onclick="resetAssessment()">å†æ¸¬å®š</button>
            </div>
        </div>
    </div>

<script>
        let selectedScore = null;
        let measurementData = {};

        // ç¾åœ¨ã®æ—¥æ™‚ã‚’è¨­å®š
        function setCurrentDateTime() {
            const now = new Date();
            const dateString = now.toISOString().split('T')[0];
            const timeString = now.toTimeString().split(' ')[0].substring(0, 5);
            
            document.getElementById('measureDate').value = dateString;
            document.getElementById('measureTime').value = timeString;
            
            // æ—¥ä»˜ã¨æ™‚åˆ»ãŒå…¥åŠ›ã•ã‚ŒãŸã‚‰ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
            checkStartButton();
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ç¾åœ¨æ—¥æ™‚ã‚’è¨­å®š
        window.onload = function() {
            setCurrentDateTime();
        };

        // æ—¥ä»˜ãƒ»æ™‚åˆ»ã®å…¥åŠ›ãƒã‚§ãƒƒã‚¯
        function checkStartButton() {
            const date = document.getElementById('measureDate').value;
            const time = document.getElementById('measureTime').value;
            const startBtn = document.getElementById('startBtn');
            
            if (date && time) {
                startBtn.disabled = false;
            } else {
                startBtn.disabled = true;
            }
        }

        // æ—¥ä»˜ãƒ»æ™‚åˆ»å…¥åŠ›æ™‚ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('measureDate').addEventListener('change', checkStartButton);
            document.getElementById('measureTime').addEventListener('change', checkStartButton);
        });

        function startAssessment() {
            // æ¸¬å®šãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
            measurementData.date = document.getElementById('measureDate').value;
            measurementData.time = document.getElementById('measureTime').value;
            measurementData.timestamp = new Date().toISOString();
            
            // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
            document.getElementById('startSection').style.display = 'none';
            document.getElementById('testSection').style.display = 'block';
        }

        function selectScale(score) {
            selectedScore = score;
            
            // å…¨ã¦ã®é¸æŠè‚¢ã‹ã‚‰ selected ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
            document.querySelectorAll('.scale-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // é¸æŠã•ã‚ŒãŸé¸æŠè‚¢ã« selected ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
            event.currentTarget.classList.add('selected');
            
            // ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯
            event.currentTarget.querySelector('input[type="radio"]').checked = true;
            
            // çµæœè¡¨ç¤ºãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
            document.getElementById('submitBtn').disabled = false;
        }

        function showResults() {
            if (!selectedScore) return;
            
            // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
            document.getElementById('testSection').style.display = 'none';
            document.getElementById('resultsSection').style.display = 'block';
            
            // ã‚¹ã‚³ã‚¢è¡¨ç¤º
            document.getElementById('finalScore').textContent = selectedScore;
            
            // è§£é‡ˆã®è¡¨ç¤º
            displayInterpretation(selectedScore);
            
            // æ¸¬å®šæƒ…å ±ã®è¡¨ç¤º
            displayMeasurementInfo();
        }

        function displayInterpretation(score) {
            let interpretation = '';
            let detailedText = '';
            
            switch(score) {
                case 1:
                    interpretation = 'è¦šé†’çŠ¶æ…‹è‰¯å¥½';
                    detailedText = `
                        <p><strong>ãƒ¬ãƒ™ãƒ«1: æœ€è‰¯ã®è¦šé†’çŠ¶æ…‹</strong></p>
                        <p>ååˆ†ã«è¦šé†’ã—ã¦ãŠã‚Šã€æ³¨æ„åŠ›ã‚‚æœ€å¤§é™ã«ç™ºæ®ã§ãã‚‹çŠ¶æ…‹ã§ã™ã€‚å®‰å…¨ã§åŠ¹ç‡çš„ãªæ¥­å‹™é‚è¡ŒãŒå¯èƒ½ã§ã™ã€‚</p>
                        <p><strong>æ¨å¥¨äº‹é …:</strong> ç¾åœ¨ã®è‰¯å¥½ãªçŠ¶æ…‹ã‚’ç¶­æŒã—ã¦ãã ã•ã„ã€‚</p>
                    `;
                    break;
                case 2:
                    interpretation = 'è‰¯å¥½ãªè¦šé†’çŠ¶æ…‹';
                    detailedText = `
                        <p><strong>ãƒ¬ãƒ™ãƒ«2: è‰¯å¥½ãªæ©Ÿèƒ½çŠ¶æ…‹</strong></p>
                        <p>åŠ¹æœçš„ã«æ©Ÿèƒ½ã§ãã€æ³¨æ„åŠ›ã‚‚åºƒç¯„å›²ã«å‘ã„ã¦ã„ã‚‹è‰¯å¥½ãªçŠ¶æ…‹ã§ã™ã€‚é€šå¸¸æ¥­å‹™ã«æ”¯éšœã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
                        <p><strong>æ¨å¥¨äº‹é …:</strong> ã“ã®çŠ¶æ…‹ã‚’ç¶­æŒã—ã€å®šæœŸçš„ãªä¼‘æ†©ã‚’å¿ƒãŒã‘ã¦ãã ã•ã„ã€‚</p>
                    `;
                    break;
                case 3:
                    interpretation = 'ãƒªãƒ©ãƒƒã‚¯ã‚¹çŠ¶æ…‹';
                    detailedText = `
                        <p><strong>ãƒ¬ãƒ™ãƒ«3: ãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ãŸçŠ¶æ…‹</strong></p>
                        <p>åå¿œæ€§ã¯è‰¯å¥½ã§ã™ãŒã€æ³¨æ„åŠ›ãŒã‚„ã‚„ä½ä¸‹ã—ã¦ã„ã¾ã™ã€‚è»½åº¦ã®æ³¨æ„æ•£æ¼«ãŒè¦‹ã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>
                        <p><strong>æ¨å¥¨äº‹é …:</strong> é‡è¦ãªä½œæ¥­å‰ã«ã¯è»½ã„åˆºæ¿€ï¼ˆå†·æ°´ã€è»½ã„é‹å‹•ç­‰ï¼‰ãŒæœ‰åŠ¹ã§ã™ã€‚</p>
                    `;
                    break;
                case 4:
                    interpretation = 'è»½åº¦ã®æ³¨æ„åŠ›ä½ä¸‹';
                    detailedText = `
                        <p><strong>ãƒ¬ãƒ™ãƒ«4: è»½åº¦ã®çœ æ°—</strong></p>
                        <p>å°‘ã—ã¼ã‚“ã‚„ã‚Šã—ã¦ãŠã‚Šã€æ³¨æ„åŠ›ãŒæ•£æ¼«ã«ãªã£ã¦ã„ã¾ã™ã€‚ãƒŸã‚¹ãŒèµ·ã“ã‚Šã‚„ã™ã„çŠ¶æ…‹ã§ã™ã€‚</p>
                        <p><strong>æ¨å¥¨äº‹é …:</strong> çŸ­æ™‚é–“ã®ä¼‘æ†©ã€ã‚«ãƒ•ã‚§ã‚¤ãƒ³æ‘‚å–ã€æ˜ã‚‹ã„ç’°å¢ƒã¸ã®ç§»å‹•ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚</p>
                    `;
                    break;
                case 5:
                    interpretation = 'ä¸­ç­‰åº¦ã®çœ æ°—';
                    detailedText = `
                        <p><strong>ãƒ¬ãƒ™ãƒ«5: ä¸­ç­‰åº¦ã®æ³¨æ„åŠ›ä½ä¸‹</strong></p>
                        <p>æ˜ã‚‰ã‹ã«ã¼ã‚“ã‚„ã‚Šã—ã¦ãŠã‚Šã€æ³¨æ„åŠ›ãŒä½ä¸‹ã—ã¦ã„ã¾ã™ã€‚æ¥­å‹™åŠ¹ç‡ã«å½±éŸ¿ãŒå‡ºã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>
                        <p><strong>æ¨å¥¨äº‹é …:</strong> 10-15åˆ†ã®ä»®çœ ã€ã¾ãŸã¯ååˆ†ãªä¼‘æ†©ãŒå¿…è¦ã§ã™ã€‚é‡è¦ãªåˆ¤æ–­ã¯é¿ã‘ã¦ãã ã•ã„ã€‚</p>
                    `;
                    break;
                case 6:
                    interpretation = 'é«˜åº¦ãªçœ æ°—';
                    detailedText = `
                        <p><strong>ãƒ¬ãƒ™ãƒ«6: é«˜åº¦ãªçœ æ°—çŠ¶æ…‹</strong></p>
                        <p>è¦šé†’ã‚’ç¶­æŒã™ã‚‹ã®ã«åŠªåŠ›ãŒå¿…è¦ã§ã€æœ¦æœ§ã¨ã—ãŸçŠ¶æ…‹ã§ã™ã€‚å®‰å…¨æ€§ã«å•é¡ŒãŒç”Ÿã˜ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>
                        <p><strong>æ¨å¥¨äº‹é …:</strong> 20-30åˆ†ã®ä»®çœ ãŒå¼·ãæ¨å¥¨ã•ã‚Œã¾ã™ã€‚å±é™ºãªä½œæ¥­ã¯é¿ã‘ã¦ãã ã•ã„ã€‚</p>
                    `;
                    break;
                case 7:
                    interpretation = 'é‡åº¦ã®çœ æ°—';
                    detailedText = `
                        <p><strong>ãƒ¬ãƒ™ãƒ«7: é‡åº¦ã®çœ æ°—çŠ¶æ…‹</strong></p>
                        <p>å¤¢è¦‹å¿ƒåœ°ã§æ€è€ƒåŠ›ãŒè‘—ã—ãä½ä¸‹ã—ã¦ã„ã¾ã™ã€‚ã„ã¤çœ ã£ã¦ã—ã¾ã£ã¦ã‚‚ãŠã‹ã—ããªã„çŠ¶æ…‹ã§ã™ã€‚</p>
                        <p><strong>æ¨å¥¨äº‹é …:</strong> ç›´ã¡ã«å®‰å…¨ãªå ´æ‰€ã§ä¼‘æ†©ã—ã¦ãã ã•ã„ã€‚æ¥­å‹™ç¶™ç¶šã¯å±é™ºã§ã™ã€‚</p>
                    `;
                    break;
                case 8:
                    interpretation = 'æ¥µåº¦ã®çœ æ°—';
                    detailedText = `
                        <p><strong>ãƒ¬ãƒ™ãƒ«8: æ¥µåº¦ã®çœ æ°—çŠ¶æ…‹</strong></p>
                        <p>æ¬¡ã®ç¬é–“çœ ã£ã¦ã—ã¾ã„ãã†ãªå±é™ºãªçŠ¶æ…‹ã§ã™ã€‚æ„è­˜ã‚’ä¿ã¤ã“ã¨ãŒå›°é›£ã§ã™ã€‚</p>
                        <p><strong>æ¨å¥¨äº‹é …:</strong> ç›´ã¡ã«æ¥­å‹™ã‚’ä¸­æ­¢ã—ã€ååˆ†ãªç¡çœ ã‚’å–ã£ã¦ãã ã•ã„ã€‚åŒ»ç™‚å¾“äº‹è€…ã¯ä¸Šå¸ã«å ±å‘Šã—ã¦ãã ã•ã„ã€‚</p>
                    `;
                    break;
            }
            
            document.getElementById('interpretation').textContent = interpretation;
            document.getElementById('detailedInterpretation').innerHTML = detailedText;
        }

        function displayMeasurementInfo() {
            const date = new Date(measurementData.date + 'T' + measurementData.time);
            const dateStr = date.toLocaleDateString('ja-JP', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                weekday: 'long'
            });
            const timeStr = date.toLocaleTimeString('ja-JP', {
                hour: '2-digit',
                minute: '2-digit'
            });
            
            document.getElementById('measurementInfo').innerHTML = 
                `æ¸¬å®šæ—¥æ™‚: ${dateStr} ${timeStr}<br>è¨˜éŒ²æ—¥æ™‚: ${new Date().toLocaleString('ja-JP')}`;
        }

        function shareResults() {
            const score = selectedScore;
            const interpretation = document.getElementById('interpretation').textContent;
            const measureDate = measurementData.date;
            const measureTime = measurementData.time;
            
            const shareText = `ğŸ˜´ ã‚¹ã‚¿ãƒ³ãƒ•ã‚©ãƒ¼ãƒ‰ç¡çœ å°ºåº¦ï¼ˆSSSï¼‰çµæœ ğŸ˜´\n\n` +
                `ğŸ“Š çœ æ°—ãƒ¬ãƒ™ãƒ«: ${score}/8\n` +
                `ğŸ’¤ çŠ¶æ…‹: ${interpretation}\n` +
                `ğŸ“… æ¸¬å®šæ—¥æ™‚: ${measureDate} ${measureTime}\n\n` +
                `ğŸ“ è©•ä¾¡åŸºæº–:\n` +
                `1-2: è‰¯å¥½ãªè¦šé†’çŠ¶æ…‹\n` +
                `3-4: è»½åº¦ã®çœ æ°—\n` +
                `5-6: ä¸­ç­‰åº¦ã®çœ æ°—\n` +
                `7-8: é‡åº¦ã®çœ æ°—\n\n` +
                `#ã‚¹ã‚¿ãƒ³ãƒ•ã‚©ãƒ¼ãƒ‰ç¡çœ å°ºåº¦ #SSS #çœ æ°—è©•ä¾¡ #çœ‹è­·ç ”ç©¶`;

            if (typeof liff !== 'undefined' && liff.isApiAvailable('shareTargetPicker')) {
                liff.shareTargetPicker([
                    {
                        type: 'text',
                        text: shareText
                    }
                ]);
            } else if (navigator.share) {
                navigator.share({
                    title: 'ã‚¹ã‚¿ãƒ³ãƒ•ã‚©ãƒ¼ãƒ‰ç¡çœ å°ºåº¦çµæœ',
                    text: shareText
                });
            } else {
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('çµæœã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼LINEã§è²¼ã‚Šä»˜ã‘ã¦å…±æœ‰ã—ã¦ãã ã•ã„ã€‚');
                }).catch(() => {
                    const textArea = document.createElement('textarea');
                    textArea.value = shareText;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert('çµæœã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
                });
            }
        }

        function resetAssessment() {
            selectedScore = null;
            measurementData = {};
            
            // ç”»é¢ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('resultsSection').style.display = 'none';
            document.getElementById('startSection').style.display = 'block';
            
            // é¸æŠçŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ
            document.querySelectorAll('.scale-option').forEach(option => {
                option.classList.remove('selected');
                option.querySelector('input[type="radio"]').checked = false;
            });
            
            // ãƒœã‚¿ãƒ³çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('submitBtn').disabled = true;
            
            // ç¾åœ¨æ—¥æ™‚ã‚’å†è¨­å®š
            setCurrentDateTime();
        }

        // LINE LIFFåˆæœŸåŒ–
        if (typeof liff !== 'undefined') {
            liff.init({
                liffId: '2007512404-5D9d4gBM' // â† ã“ã“ã«å–å¾—ã—ãŸLIFF IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
            }).then(() => {
                console.log('LIFFåˆæœŸåŒ–æˆåŠŸ');
                if (liff.isLoggedIn()) {
                    liff.getProfile().then(profile => {
                        console.log('ãƒ¦ãƒ¼ã‚¶ãƒ¼å:', profile.displayName);
                    });
                }
            }).catch((err) => {
                console.error('LIFFåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', err);
            });
        }
    </script>
</body>
</html>
